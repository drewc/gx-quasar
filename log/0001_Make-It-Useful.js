export default{$$data_type:"org-document",properties:{title:["Make It Useful: Lazy, Links and Publish"],filetags:[],author:[],creator:"Emacs 28.0.50 (Org mode 9.3)",date:[],description:[],email:"drewc@nyx",language:"en"},contents:[{$$data_type:"org-node",type:"section",ref:"orge915657",properties:{"post-blank":1,"post-affiliated":1},contents:[{$$data_type:"org-node",type:"keyword",ref:"org0dbf6a8",properties:{key:"TITLE",value:"Make It Useful: Lazy, Links and Publish","post-blank":1,"post-affiliated":1},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"orgd92415e",properties:{"post-blank":0,"post-affiliated":51},contents:[{$$data_type:"org-node",type:"timestamp",ref:"org52ecbab",properties:{type:"inactive","raw-value":"[2020-11-07 Sat]","post-blank":0,start:"2020-11-07",end:"2020-11-07"},contents:[]},"\n"]}]},{$$data_type:"org-node",type:"headline",ref:"org87d1f3e",drawer:{},properties:{"tags-all":[],"raw-value":"Bug/Feature #1: It works, but why?","pre-blank":1,level:1,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":5,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":69,title:["Bug/Feature #1: It works, but why?"]},contents:[{$$data_type:"org-node",type:"section",ref:"org58ed4ea",properties:{"post-blank":5,"post-affiliated":107},contents:[{$$data_type:"org-node",type:"paragraph",ref:"org11732a6",properties:{"post-blank":1,"post-affiliated":107},contents:["This is very odd, but it seems the compiler cannot handle a global variable that is not known?\n"]},{$$data_type:"org-node",type:"paragraph",ref:"orgf3db9cb",properties:{"post-blank":1,"post-affiliated":203},contents:['As "luck" would have it, because I literate program, the ',{$$data_type:"org-node",type:"code",ref:"org112877e",properties:{value:"Index.vue","post-blank":1},contents:[]},"was tangled twice. The first script and template tags are in fact ignored by the vuejs it seems, yet the compiler seems to take the first script tag into account when linting and/or link checking.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org5d656a6",properties:{"post-blank":1,"post-affiliated":470},contents:["In other words, it seems that the last method fails to compile.\n"]},{$$data_type:"org-node",type:"src-block",ref:"orgda735c4",properties:{language:"javascript",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"sourceCodeRun (id) {\n  var val = g_sourceCodeRun(id)\n  alert('=> ' + val)\n}\n","post-blank":1,"post-affiliated":535},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org0186ef9",properties:{"post-blank":1,"post-affiliated":645},contents:["That errors with ",{$$data_type:"org-node",type:"code",ref:"orgd321154",properties:{value:"40:17 error 'g_sourceCodeRun' is not defined no-undef","post-blank":0},contents:[]},".\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org5e530b3",properties:{"post-blank":1,"post-affiliated":720},contents:["But, if I add an empty script tag before the one that actually runs in the\n",{$$data_type:"org-node",type:"code",ref:"org068e4ac",properties:{value:"Index.vue","post-blank":0},contents:[]},", it compiles and runs.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org86e2b1b",properties:{language:"vue",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"\n<script> <\/script>\n<script>\n  // [...]\n   sourceCodeRun (id) {\n      var val = g_sourceCodeRun(id)\n      alert('=> ' + val)\n    }\n  // [...]\n<\/script>\n","post-blank":1,"post-affiliated":831},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org52c62f0",properties:{"post-blank":1,"post-affiliated":1010},contents:["Now, I like lint. Just ask my navel. So, perhaps I should import/export it.\n"]},{$$data_type:"org-node",type:"src-block",ref:"orgb46e26b",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'(import :gerbil/gambit)\n(declare (extended-bindings))\n\n(##inline-host-statement\n "exports.evalElement = (arg) => {\n  alert(\'Lazy? Hello \' + arg)\n}"\n)\n\n(define (document.getElementById id)\n  (##inline-host-expression "g_host2foreign(document.getElementById(g_scm2host(@1@)))" id))\n\n(define (Element.innerText-ref elem)\n  (##inline-host-expression "g_host2scm(g_foreign2host(@1@).innerText)" elem))\n\n(define (g-sourceCodeRun id)\n  (let* ((elem (document.getElementById id))\n\t (code (Element.innerText-ref elem)))\n    (let ((expr (cons \'##begin (with-input-from-string code read-all))))\n      (eval expr))\n\n    ))\n\n(##inline-host-declaration "g_sourceCodeRun = function () { alert(\'sourceCodeRun\'); };")\n\n(##inline-host-statement "\ng_sourceCodeRun = g_scm2host(@1@);\nexports.sourceCodeRun = g_sourceCodeRun;" g-sourceCodeRun)\n\n',"post-blank":2,"post-affiliated":1087},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org4de2fd5",properties:{"post-blank":1,"post-affiliated":1942},contents:["Now, with the import, everything should work as expected. We also needed to change the exported name to camelCase. Lint!\n"]},{$$data_type:"org-node",type:"fixed-width",ref:"orgbb40ad6",properties:{value:"import { sourceCodeRun } from 'app/public/gambit-repl.js'","post-blank":1,"post-affiliated":2064},contents:[]}]}]},{$$data_type:"org-node",type:"headline",ref:"orgb09de7c",drawer:{},properties:{"tags-all":[],"raw-value":"Links","pre-blank":1,level:1,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":2,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":2131,title:["Links"]},contents:[{$$data_type:"org-node",type:"section",ref:"orge1f96d6",properties:{"post-blank":1,"post-affiliated":2140},contents:[{$$data_type:"org-node",type:"paragraph",ref:"orga2c9190",properties:{"post-blank":1,"post-affiliated":2140},contents:["In the ",{$$data_type:"org-node",type:"code",ref:"orgead9bb6",properties:{value:"MainLayout.vue","post-blank":1},contents:[]},"there is a series of link on the menu.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org430e800",properties:{language:"javascript",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"const linksData = [\n  {\n    title: 'Docs',\n    caption: 'quasar.dev',\n    icon: 'school',\n    link: 'https://quasar.dev'\n  },\n  {\n    title: 'Github',\n    caption: 'github.com/quasarframework',\n    icon: 'code',\n    link: 'https://github.com/quasarframework'\n  },\n  // [...]\n  {\n    title: 'Quasar Awesome',\n    caption: 'Community Quasar projects',\n    icon: 'favorite',\n    link: 'https://awesome.quasar.dev'\n  }\n]\n","post-blank":1,"post-affiliated":2204},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org482e81f",properties:{"post-blank":1,"post-affiliated":2655},contents:["I'm going to make that into a ",{$$data_type:"org-node",type:"code",ref:"org5b55b1d",properties:{value:"plist","post-blank":1},contents:[]},"and then have ",{$$data_type:"org-node",type:"code",ref:"org80c2af4",properties:{value:"plist->jso","post-blank":1},contents:[]},"function that\ndoes what we want.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org462ccae",properties:{"post-blank":2,"post-affiliated":2754},contents:["This took a lot longer than expected as ",{$$data_type:"org-node",type:"code",ref:"org16e5896",properties:{value:"Gerbil + Gambit + our runtime = ???","post-blank":0},contents:[]},"\nand we were questioning for sure. A few re-writes are needed.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org30b9135",properties:{"post-blank":1,"post-affiliated":2896},contents:["Making a host object seems easy. Because in ",{$$data_type:"org-node",type:"code",ref:"org4eaf3b8",properties:{value:"js","post-blank":1},contents:[]},"almost everything is an\n",{$$data_type:"org-node",type:"code",ref:"org8683f73",properties:{value:"object","post-blank":0},contents:[]},", ",{$$data_type:"org-node",type:"bold",ref:"orgd094965",properties:{"post-blank":1},contents:["Gambit"]},"allows us to, at least at certain times(!), set a vector\nusing a keyword as the index which creates a ",{$$data_type:"org-node",type:"code",ref:"orge57a663",properties:{value:"js","post-blank":1},contents:[]},"object with those fields.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"orgf46d57c",properties:{"post-blank":1,"post-affiliated":3122},contents:["We'll do so and copy it to make it an object that is not an array.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org7d388e8",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'(def (plist->jso plist)\n  (def jso (##make-vector 0))\n  (def (p->o p)\n    (if (null? p) jso\n\t(begin ; (console.log p)\n\t       (set! jso (##vector-set!\n\t\t\t  jso (car p)\n\t\t\t  (##inline-host-expression "g_scm2host(@1@);" (cadr p))))\n\t       (p->o (cddr p)))))\n  (##inline-host-expression "Object.fromEntries(Object.entries(@1@));" (p->o plist)))\n',"post-blank":1,"post-affiliated":3190},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org41fe07c",properties:{"post-blank":1,"post-affiliated":3563},contents:["What if we actually want a ",{$$data_type:"org-node",type:"code",ref:"org3697b74",properties:{value:"##vector","post-blank":1},contents:[]},"but have a list?\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org17305b0",properties:{"post-blank":1,"post-affiliated":3619},contents:["It seems that ",{$$data_type:"org-node",type:"code",ref:"org1e6be75",properties:{value:"length","post-blank":1},contents:[]},"and/or ",{$$data_type:"org-node",type:"code",ref:"org8d444f0",properties:{value:"##length","post-blank":1},contents:[]},"does not exist in our runtime. We'll\ncertainly need it at some point, so we'll define our own.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org74e1d5c",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"(def (length lst)\n  (if (null? lst) 0 (+ 1 (length (##cdr lst)))))\n","post-blank":1,"post-affiliated":3756},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org983abf6",properties:{"post-blank":1,"post-affiliated":3853},contents:["Same for ",{$$data_type:"org-node",type:"code",ref:"org8d47fd2",properties:{value:"##list->vector","post-blank":1},contents:[]},"and friend. The ",{$$data_type:"org-node",type:"code",ref:"org613db36",properties:{value:"##","post-blank":1},contents:[]},"prefix is notable.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org92a8998",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"(def (list->vector lst)\n  (def n (##length lst))\n  (def vec (##make-vector n))\n\n  (let loop ((i 0) (l lst))\n    (if (not (null? l))\n      (begin\n\t(##vector-set! vec i (##car l))\n\t(loop (+ i 1) (##cdr l)))))\n  vec)\n","post-blank":1,"post-affiliated":3920},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org96fde6f",properties:{"post-blank":1,"post-affiliated":4164},contents:["Because we are defining them, using ",{$$data_type:"org-node",type:"code",ref:"orge397c3e",properties:{value:"def","post-blank":0},contents:[]},", a ",{$$data_type:"org-node",type:"bold",ref:"org01a1f7a",properties:{"post-blank":1},contents:["Gerbil"]},"form, and without the ",{$$data_type:"org-node",type:"code",ref:"org1852f10",properties:{value:"##","post-blank":0},contents:[]},"\nprefix, we need to specify the ",{$$data_type:"org-node",type:"code",ref:"org6279a2e",properties:{value:"namespace:","post-blank":0},contents:[]},". ",{$$data_type:"org-node",type:"bold",ref:"org4ef26fa",properties:{"post-blank":1},contents:["Gerbil"]},"and ",{$$data_type:"org-node",type:"bold",ref:"org5e9bad4",properties:{"post-blank":1},contents:["Gambit"]},"use the ",{$$data_type:"org-node",type:"code",ref:"org62d1238",properties:{value:"#","post-blank":0},contents:[]},"\nsign as the separator.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org2ef8d28",properties:{"post-blank":1,"post-affiliated":4348},contents:["For example, in ",{$$data_type:"org-node",type:"code",ref:"org95f1124",properties:{value:"static/lazy-gambit-repl.scm","post-blank":0},contents:[]},", which is a generated/transpiled scheme file\nfrom our version, the symbols defined all have a prefix.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org0b03898",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"(define lazy-gambit-repl#g-sourceCodeRun\n    (lambda (_id389_)\n      (let* ((_elem391_ (lazy-gambit-repl#document.getElementById _id389_))\n\t     (_code393_ (lazy-gambit-repl#Element.innerText-ref _elem391_)))\n  [...])\n","post-blank":1,"post-affiliated":4497},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"orgfbfcbba",properties:{"post-blank":1,"post-affiliated":4745},contents:[{$$data_type:"org-node",type:"bold",ref:"org3ed600e",properties:{"post-blank":1},contents:["Gerbil"]},"has a ",{$$data_type:"org-node",type:"code",ref:"org9feb979",properties:{value:"namespace:","post-blank":1},contents:[]},"keyword that, when placed at the toplevel,\ninterprets definitions, along with usage of those defined symbols, in that\nnamespace.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"orgf9b8687",properties:{"post-blank":1,"post-affiliated":4903},contents:["It seems that ",{$$data_type:"org-node",type:"bold",ref:"orgaeaa581",properties:{"post-blank":1},contents:["Gambit"]},"has ",{$$data_type:"org-node",type:"code",ref:"org114a6e7",properties:{value:"##","post-blank":1},contents:[]},"as the prefix for primatives. We can use that to\ncheat our way.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org0256c84",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'namespace: "#"\n',"post-blank":1,"post-affiliated":5e3},contents:[]},{$$data_type:"org-node",type:"paragraph",ref:"org99d0599",properties:{"post-blank":1,"post-affiliated":5045},contents:["Using that keyword at the top makes the namespace ",{$$data_type:"org-node",type:"code",ref:"orgce8d0a1",properties:{value:"#","post-blank":1},contents:[]},"and the separator ",{$$data_type:"org-node",type:"code",ref:"orgb56a5ba",properties:{value:"#","post-blank":0},contents:[]},". So\nour symbols are ",{$$data_type:"org-node",type:"code",ref:"org93c81d1",properties:{value:"##","post-blank":1},contents:[]},"prefixed like the gambit primatives.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org495906a",properties:{"post-blank":1,"post-affiliated":5184},contents:["Now a simply dynamic module that gives us an exported object.\n"]},{$$data_type:"org-node",type:"src-block",ref:"orgddd17b0",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'(declare (extended-bindings))\n(extern namespace: "#" plist->jso list->vector)\n(extern namespace: "#" alert)\n(def linksData\n  \'((title: "Gerbil Docs" caption: "cons.io" icon: "school" link: "https://cons.io")\n    (title: "Quasar Docs" caption: "quasar.dev" icon: "school" link: "https://quasar.dev")))\n\n\n(##inline-host-statement\n " exports.links = (@1@);"\n (list->vector (map plist->jso linksData)))\n\n\n(##inline-host-statement\n "exports.Hello = (arg) => {\n   var hello_fn = g_scm2host(@1@)\n   hello_fn(\'Hello \' + arg)\n}"\n (lambda (str) (alert str)))\n',"post-blank":1,"post-affiliated":5247},contents:[]},{$$data_type:"org-node",type:"src-block",ref:"org006fde7",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'namespace: "#"\n(declare (extended-bindings))\n(declare (not inline))\n\n(def (alert thing) (##inline-host-statement "var foo = (@1@);\n  var bar = typeof foo === \'string\' ? foo : g_scm2host(foo)\n  alert(bar);" thing))\n(def (console.log obj) (##inline-host-statement "console.log((@1@))" obj))\n\n;; (define (apply proc arg1 . rest)\n;;   (if (##pair? rest)\n\n;;       (let loop ((prev arg1) (lst rest))\n;;         (let ((temp (##car lst)))\n;;           (##set-car! lst prev)\n;;           (let ((tail (##cdr lst)))\n;;             (if (##pair? tail)\n;;                 (loop temp tail)\n;;                 (begin\n;;                   (##set-cdr! lst temp)\n;;                   (##apply proc rest))))))\n\n;;       (##apply proc arg1)))\n\n(def (plist->jso plist)\n  (def jso (##make-vector 0))\n  (def (p->o p)\n    (if (null? p) jso\n\t(begin ; (console.log p)\n\t       (set! jso (##vector-set!\n\t\t\t  jso (car p)\n\t\t\t  (##inline-host-expression "g_scm2host(@1@);" (cadr p))))\n\t       (p->o (cddr p)))))\n  (##inline-host-expression "Object.fromEntries(Object.entries(@1@));" (p->o plist)))\n\n(def (length lst)\n  (if (null? lst) 0 (+ 1 (length (##cdr lst)))))\n\n(def (list->vector lst)\n  (def n (##length lst))\n  (def vec (##make-vector n))\n\n  (let loop ((i 0) (l lst))\n    (if (not (null? l))\n      (begin\n\t(##vector-set! vec i (##car l))\n\t(loop (+ i 1) (##cdr l)))))\n  vec)\n\n(def (gambit-module-name mod)\n  (def obj (##vector-ref (##vector-ref mod 0) 0))\n  (##inline-host-expression "(@1@).name" obj))\n\n(def (init-gambit-module mod)\n  (let ((init (##vector-ref mod 4)))\n    (if (not (##procedure? init)) (error "No init for " mod)\n      (init))))\n\n(define (init-gambit-program)\n  (declare (extended-bindings) (not safe))\n    (let ((mods (##vector-ref ##program-descr 0)))\n      (let loop ((i 1)) ;; start at module after the current one\n\t(if (##fx< i (##vector-length mods))\n\t    (let ((mod (##vector-ref mods i)))\n\t      (init-gambit-module mod) ;; call module\'s init procedure\n\t      (loop (##fx+ i 1)))))))\n\n(init-gambit-program)\n\n(##inline-host-declaration "\ngx_old_module_register = g_module_register;\n\ngx_gambit_module_table = [];\n\ngx_gambit_module_init = function (m) { alert(\'gx_gambit_module_init undefined\') }\n\ngx_gambit_module_register = function (module_descr) {\n  gx_gambit_module_table.push(module_descr);\n  typeof g_glo[\'##program-descr\'] === \'object\' ? gx_gambit_module_init(module_descr)\n    : gx_old_module_register(module_descr)\n}\n\ng_module_register = gx_gambit_module_register;\n\n// console.log(g_module_register);\n")\n\n(##inline-host-statement "gx_gambit_module_init = (g_scm2host(@1@)); " (lambda (mod) (init-gambit-module mod)))\n',"post-blank":0,"post-affiliated":5826},contents:[]}]},{$$data_type:"org-node",type:"headline",ref:"orge83779c",drawer:{},properties:{"tags-all":[],"raw-value":"~gambit-module-test.ss~: A module not loaded in the gambit program","pre-blank":1,level:2,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":1,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":8482,title:[{$$data_type:"org-node",type:"code",ref:"org29ef5fe",properties:{value:"gambit-module-test.ss","post-blank":0},contents:[]},": A module not loaded in the gambit program"]},contents:[{$$data_type:"org-node",type:"section",ref:"org86ff484",properties:{"post-blank":1,"post-affiliated":8553},contents:[{$$data_type:"org-node",type:"src-block",ref:"orgf481eb5",properties:{language:"scheme",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'(declare (extended-bindings))\n(extern namespace: "#" alert console.log plist->jso)\n\n(##inline-host-statement\n "exports.Test = (arg) => {\n   var hello_fn = g_scm2host(@1@)\n   hello_fn(\'Test\' + arg)\n}"\n (lambda (str)\n   (let* ((mod (##inline-host-expression "gx_gambit_module_table[1];"))\n\t  (name (##gambit-module-name mod)))\n     (console.log mod)\n\n     (alert str) (alert name))))\n',"post-blank":0,"post-affiliated":8553},contents:[]}]}]},{$$data_type:"org-node",type:"headline",ref:"org408f8d4",drawer:{},properties:{"tags-all":[],"raw-value":"The new ~Index.vue~","pre-blank":1,level:2,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":1,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":8965,title:["The new ",{$$data_type:"org-node",type:"code",ref:"org8f842ad",properties:{value:"Index.vue","post-blank":0},contents:[]}]},contents:[{$$data_type:"org-node",type:"section",ref:"org8f822b5",properties:{"post-blank":1,"post-affiliated":8990},contents:[{$$data_type:"org-node",type:"paragraph",ref:"org5ebaa6c",properties:{"post-blank":1,"post-affiliated":8990},contents:["This is what we end up with for the index page. Because we lazy-load gambit we want to inform the user of such. The ",{$$data_type:"org-node",type:"link",ref:"orga24fdd2",properties:{type:"https",path:"//quasar.dev/quasar-plugins/loading#Loading-API",format:"bracket","raw-link":"https://quasar.dev/quasar-plugins/loading#Loading-API",application:null,"search-option":null,"post-blank":1,"is-internal":!1,"target-ref":null,"is-inline-image":!1},contents:["Loading Plugin"]},"for ",{$$data_type:"org-node",type:"bold",ref:"orgab5e7b6",properties:{"post-blank":1},contents:["Quasar"]},"is good enough.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org05481ff",properties:{language:"javascript",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"// quasar.conf.js\n\nreturn {\n  framework: {\n    plugins: [\n      'Loading'\n    ],\n    config: {\n      loading: {\n\tdelay: 300,\n\tmessage: 'Loading API...'\n      }\n    }\n  }\n}\n","post-blank":1,"post-affiliated":9210},contents:[]},{$$data_type:"org-node",type:"src-block",ref:"orgc179479",properties:{language:"vue",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"<template>\n  <q-page class=\"flex flex-center\">\n    <q-btn color=\"red\" @click=\"Hello('WOrld! Tahgle!')\"> Hello World</q-btn>\n    <q-btn color=\"red\" @click=\"Test('WOrld! Tahgle!')\"> Test function</q-btn>\n    <br>\n    <div class=\"full-width\" contenteditable=\"true\" id=\"gx_repl\" style=\"max-width: 300px; height: 25vh; border: 2px solid black;\">\n    534\n   </div>\n    <q-btn color=\"red\" @click=\"sourceCodeRun('gx_repl')\"> Repl </q-btn>\n  </q-page>\n</template>\n\n<script>\nimport { Hello } from 'app/public/gxjs.js'\nimport { Test } from 'app/public/gambit-module-test.js'\nimport { Loading } from 'quasar'\n\nexport default {\n  name: 'PageIndex',\n  methods: {\n    Hello (arg) {\n      console.log(Hello)\n      if (typeof Hello === 'function') { Hello('Hello: ' + arg) }\n    },\n    Test (arg) {\n      console.log(Test)\n      if (typeof Test === 'function') { Test('Test: ' + arg) }\n    },\n    sourceCodeRun (id) {\n      var scRun = false;\n      (async () => {\n\tif (!scRun) {\n\t  Loading.show()\n\t  const { sourceCodeRun } = await import('app/public/gambit-repl.js')\n\t  scRun = sourceCodeRun\n\t  Loading.hide()\n\t}\n\tvar val = scRun(id)\n\talert('=> ' + val)\n      })()\n    }\n  }\n}\n<\/script>\n","post-blank":0,"post-affiliated":9416},contents:[]}]}]},{$$data_type:"org-node",type:"headline",ref:"orgacdf328",drawer:{},properties:{"tags-all":[],"raw-value":"~MainLayout.vue~: Our links please!","pre-blank":1,level:2,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":0,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":10614,title:[{$$data_type:"org-node",type:"code",ref:"org30a7b6f",properties:{value:"MainLayout.vue","post-blank":0},contents:[]},": Our links please!"]},contents:[{$$data_type:"org-node",type:"section",ref:"orgb0fb03d",properties:{"post-blank":2,"post-affiliated":10654},contents:[{$$data_type:"org-node",type:"paragraph",ref:"org1a2f486",properties:{"post-blank":1,"post-affiliated":10654},contents:["Changing the layout to be more in line with gerbil.\n"]},{$$data_type:"org-node",type:"paragraph",ref:"org8633c1c",properties:{"post-blank":1,"post-affiliated":10707},contents:["We'll make a ",{$$data_type:"org-node",type:"code",ref:"org883d202",properties:{value:"js","post-blank":1},contents:[]},"file that exports our version.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org3153ebe",properties:{language:"shell",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'_gx_sv=../public/gerbil-system-version.js\necho "Making a $_gx_sv file"\ngxi -e \'(import :std/format)\' -e \'(display (format "export default \\"~a\\"" (gerbil-system-version-string)))\' |tee $_gx_sv\n',"post-blank":1,"post-affiliated":10757},contents:[]},{$$data_type:"org-node",type:"src-block",ref:"orgec665a3",properties:{language:"vue",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'<template>\n  <q-layout view="lHh Lpr lFf">\n    <q-header elevated>\n      <q-toolbar>\n\t<q-btn\n\t  flat\n\t  dense\n\t  round\n\t  icon="menu"\n\t  aria-label="Menu"\n\t  @click="leftDrawerOpen = !leftDrawerOpen"\n\t/>\n\n\t<q-toolbar-title>\n\t  gxQuasar: Gerbil and Quasar\n\t</q-toolbar-title>\n\n\t<div class="text-subtitle2">{{ gxVersion }} on Quasar v{{ $q.version }}</div>\n      </q-toolbar>\n    </q-header>\n\n    <q-drawer\n      v-model="leftDrawerOpen"\n      show-if-above\n      bordered\n      content-class="bg-grey-1"\n    >\n      <q-list>\n\t<q-item-label\n\t  header\n\t  class="text-grey-8"\n\t>\n\t  Essential Links\n\t</q-item-label>\n\t<EssentialLink\n\t  v-for="link in essentialLinks"\n\t  :key="link.title"\n\t  v-bind="link"\n\t/>\n      </q-list>\n    </q-drawer>\n\n    <q-page-container>\n      <router-view />\n    </q-page-container>\n  </q-layout>\n</template>\n\n<script>\nimport EssentialLink from \'components/EssentialLink.vue\'\nimport { links } from \'app/public/gxjs.js\'\nimport gxVersion from \'app/public/gerbil-system-version.js\'\nconst linksData = links\n\nexport default {\n  name: \'MainLayout\',\n  components: { EssentialLink },\n  data () {\n    return {\n      leftDrawerOpen: false,\n      essentialLinks: linksData,\n      gxVersion: gxVersion\n    }\n  }\n}\n<\/script>\n',"post-blank":0,"post-affiliated":10979},contents:[]}]}]}]},{$$data_type:"org-node",type:"headline",ref:"org040b3e8",drawer:{},properties:{"tags-all":[],"raw-value":"~build.sh~: A simple build script","pre-blank":1,level:1,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":2,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":12241,title:[{$$data_type:"org-node",type:"code",ref:"org68a1c64",properties:{value:"build.sh","post-blank":0},contents:[]},": A simple build script"]},contents:[{$$data_type:"org-node",type:"section",ref:"orgaf8f8db",properties:{"post-blank":2,"post-affiliated":12278},contents:[{$$data_type:"org-node",type:"paragraph",ref:"orgf9cb528",properties:{"post-blank":1,"post-affiliated":12278},contents:["Most of this is based off ",{$$data_type:"org-node",type:"link",ref:"org4ee069f",properties:{type:"file",path:"0000_Getting-Started.org",format:"bracket","raw-link":"file:0000_Getting-Started.org::*Third Attempt: re-init registry",application:null,"search-option":"*Third Attempt: re-init registry","post-blank":1,"is-internal":!1,"target-ref":null,"is-inline-image":!1},contents:["Third Attempt: re-init registry"]},"in the last log.\n"]},{$$data_type:"org-node",type:"src-block",ref:"org99df3ba",properties:{language:"shell",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'_dir=$(cd -P -- "$(dirname -- "$0")" && pwd -P)\n\n_gxc () {\n gxc -v -d . -S -static $1 || exit 1\n}\n\necho dir: $_dir;\n_cd="cd $_dir/gx"; echo $_cd ; $_cd;\n\n_gxc gxjs-rt.ss\n_gxc hello.ss\n_gxc lazy-gambit-repl.ss\n_gxc gambit-module-test.ss\n\n# Compile the base -l library\ngsc  -target js -c -o gxjs-rt.js static/gxjs-rt.scm || exit 1;\n\n# Make a link file from our hello to this runtime\ngsc -target js -o REMOVE-gxjs_.js -link -l gxjs-rt static/hello.scm\n\n# Steal the registry init\n_hello_mod_init="$(grep -rE \'^g_module_registry_init\\(\' REMOVE-gxjs_.js)"\n\necho Init for registry: $_hello_mod_init\n\n# Compile a link file from our hello to the _gambit.js runtime.\ngsc -target js -o hello_.js -link static/hello.scm\n\n# replace the module init with the other one for our runtime.\n\nsed -i "s/^g_module_registry_init(.*/$_hello_mod_init/" hello_.js\n\n# Compile our hello\n\ngsc -target js -o hello.js static/hello.scm\n\n# Make our actual runtime + hello into a proper js file\n\n_gxjs_rt=\'cat hello_.js hello.js gxjs-rt.js > gxjs.js\'; echo making exec: $_gxjs_rt; bash -c "$_gxjs_rt";\n\ngsc -target js -o lazy-gambit-repl.js static/lazy-gambit-repl.scm\n\n_lazy="cat g-module-reset.js lazy-mod-init.js lazy-gambit-repl.js $(gsc -e \'(display (path-expand "~~lib/_gambit.js"))\')  > gambit-repl.js"\n\necho Building the gambit repl: \\"$_lazy\\"; bash -c "$_lazy";\n\necho "Now the gambit-module-test"\ngsc -target js -o gambit-module-test.js static/gambit-module-test.scm\n\n\n_cp=\'cp gxjs.js gambit-repl.js gambit-module-test.js ../public\'; echo Copying finished JS: \\"$_cp\\"; $_cp;\n\n_gx_sv=../public/gerbil-system-version.js\necho "Making a $_gx_sv file"\ngxi -e \'(import :std/format)\' -e \'(display (format "export default \\"~a\\"" (gerbil-system-version-string)))\' |tee $_gx_sv\n\n',"post-blank":0,"post-affiliated":12423},contents:[]}]}]},{$$data_type:"org-node",type:"headline",ref:"org6584435",drawer:{},properties:{"tags-all":[],"raw-value":"Commit, build, commit, deploy","pre-blank":1,level:1,priority:null,tags:[],"todo-keyword":null,"todo-type":null,"post-blank":0,"footnote-section-p":!1,archivedp:!1,commentedp:!1,"post-affiliated":14200,title:["Commit, build, commit, deploy"]},contents:[{$$data_type:"org-node",type:"section",ref:"org5813482",properties:{"post-blank":0,"post-affiliated":14233},contents:[{$$data_type:"org-node",type:"src-block",ref:"orgfffb69b",properties:{language:"shell",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:"LD=$CC quasar build\n","post-blank":1,"post-affiliated":14233},contents:[]},{$$data_type:"org-node",type:"src-block",ref:"org870e995",properties:{language:"shell",switches:null,parameters:null,"number-lines":null,"preserve-indent":!1,"retain-labels":!0,"use-labels":!0,"label-fmt":null,value:'git stash\ngit checkout gh-pages\ngit rm -rf .\nrsync -av dist/spa/ .\ngit add css/ fonts/ js/ index.html\ngit commit -m "Update gh-pages"\ngit push origin gh-pages\ngit checkout main\ngit stash pop\n',"post-blank":0,"post-affiliated":14282},contents:[]}]}]}]};